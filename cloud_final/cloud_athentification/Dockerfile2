# Étape de construction
FROM maven:3.8-openjdk-17 AS build
WORKDIR /crypto_rojo

# Copier le fichier pom.xml pour télécharger les dépendances Maven
COPY crypto_rojo/* .
RUN mvn dependency:go-offline -B
RUN mvn clean package -DskipTests

# Étape d'exécution
FROM openjdk:17-jdk-slim
WORKDIR /crypto_rojo

# Copier les fichiers du projet depuis l'étape de construction
COPY --from=build /crypto_rojo .

# Exécuter l'application directement avec Maven
ENTRYPOINT ["./mvnw", "spring-boot:run"]

